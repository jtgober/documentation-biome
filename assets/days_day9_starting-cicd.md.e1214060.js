import{_ as s,o as n,c as a,Q as e}from"./chunks/framework.f4487b77.js";const l="/documentation-biome/playwrightyaml.png",o="/documentation-biome/ghworkflow.png",p="/documentation-biome/ghactionswf.png",w=JSON.parse('{"title":"Continuous Integration and Continuous Delivery Start!","description":"","frontmatter":{},"headers":[],"relativePath":"days/day9/starting-cicd.md","filePath":"days/day9/starting-cicd.md","lastUpdated":1677123593000}'),t={name:"days/day9/starting-cicd.md"},r=e('<h1 id="continuous-integration-and-continuous-delivery-start" tabindex="-1">Continuous Integration and Continuous Delivery Start! <a class="header-anchor" href="#continuous-integration-and-continuous-delivery-start" aria-label="Permalink to &quot;Continuous Integration and Continuous Delivery Start!&quot;">​</a></h1><p>CI/CD Baby! We are here. I have always had a fine love for CI/CD pipelines. I don&#39;t know what it is about it. Seeing everything work together just makes me happy inside. Having a good and proper CI/CD workflow can help out in many ways</p><ol><li>Early Bug Detection</li><li>Consistent Test Environment</li><li>Better Collaboration</li><li>Increased Test Coverage</li><li>Reduced Time to Market</li><li>Scalability</li><li>Improved Stability</li><li>Cost Savings</li></ol><p>And many more</p><p>Would you also believe that we technically have been setting up a pipeline this entire time? That brings us to tools.</p><h2 id="ci-cd-tools" tabindex="-1">CI/CD Tools <a class="header-anchor" href="#ci-cd-tools" aria-label="Permalink to &quot;CI/CD Tools&quot;">​</a></h2><p>One of the most popular tools ive seen used is <code>Jenkins</code>. Jenkins is an open source tool that allows for easy building, testing, and deployment. <code>Github</code> also has its own in <code>GitLab CI/CD</code>. There is also one of the tools we will be using which is pretty sweet called <code>CircleCI</code> Which is a cloud based CI/CD platform. The last one ill talk about, and we are also going to be working with is <code>Github Actions</code>, which we have technically been using the entire time without realizing it.</p><h2 id="checking-out-our-workflow" tabindex="-1">Checking out our workflow <a class="header-anchor" href="#checking-out-our-workflow" aria-label="Permalink to &quot;Checking out our workflow&quot;">​</a></h2><p>Remember whenever we were downloading playwright,and the option of <code>include git workflow?</code> came up? that was playwright setting up a pipeline for us to use in the action workflow. Lets open some of our code to check it out. For this ill open our API tests that we completed.</p><p>Within our folder structure, There is a <code>.github folder</code> that contains a <code>workflows</code> with a single playwright.yml file. <img src="'+l+`" alt=""></p><p>Lets go ahead and walkthrough what this does, and what it means.</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># name of the Workflow</span></span>
<span class="line"><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Playwright Tests</span></span>
<span class="line"><span style="color:#6A737D;"># on - Decide on what triggers the workflow</span></span>
<span class="line"><span style="color:#79B8FF;">on</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#6A737D;"># push -&gt; on: push to the main, or master branch</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">push</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">branches</span><span style="color:#E1E4E8;">: [ </span><span style="color:#9ECBFF;">main</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">master</span><span style="color:#E1E4E8;"> ]</span></span>
<span class="line"><span style="color:#6A737D;"># pull_request -&gt; on: pull_request to the main, or master branch</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">pull_request</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">branches</span><span style="color:#E1E4E8;">: [ </span><span style="color:#9ECBFF;">main</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">master</span><span style="color:#E1E4E8;"> ]</span></span>
<span class="line"><span style="color:#6A737D;"># run this job</span></span>
<span class="line"><span style="color:#85E89D;">jobs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">test</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">timeout-minutes</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># The maximum amount of time that this workflow is allowed to run before it is considered to have timed out.</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">runs-on</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ubuntu-latest</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Specifies the operating system and version to use for the workflow&#39;s virtual environment.</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">steps</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">uses</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">actions/checkout@v3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Checks out the code from the repository into the workflow&#39;s virtual environment.</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">uses</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">actions/setup-node@v3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Sets up the Node.js environment for the workflow.</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">with</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">node-version</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Specifies the version of Node.js to use.</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Install dependencies</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Installs the dependencies required by the application.</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">run</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">npm ci</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Install Playwright Browsers</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Installs the Playwright browser dependencies.</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">run</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">npx playwright install --with-deps</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Run Playwright tests</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Runs the Playwright tests.</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">run</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">npx playwright test</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">uses</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">actions/upload-artifact@v3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Uploads the test report as an artifact.</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">if</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">always()</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">with</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">playwright-report</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Specifies the name of the artifact.</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">playwright-report/</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Specifies the path to the directory containing the test report.</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">retention-days</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Specifies how long the artifact should be retained before being automatically deleted.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># name of the Workflow</span></span>
<span class="line"><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Playwright Tests</span></span>
<span class="line"><span style="color:#6A737D;"># on - Decide on what triggers the workflow</span></span>
<span class="line"><span style="color:#005CC5;">on</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#6A737D;"># push -&gt; on: push to the main, or master branch</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">push</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">branches</span><span style="color:#24292E;">: [ </span><span style="color:#032F62;">main</span><span style="color:#24292E;">, </span><span style="color:#032F62;">master</span><span style="color:#24292E;"> ]</span></span>
<span class="line"><span style="color:#6A737D;"># pull_request -&gt; on: pull_request to the main, or master branch</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">pull_request</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">branches</span><span style="color:#24292E;">: [ </span><span style="color:#032F62;">main</span><span style="color:#24292E;">, </span><span style="color:#032F62;">master</span><span style="color:#24292E;"> ]</span></span>
<span class="line"><span style="color:#6A737D;"># run this job</span></span>
<span class="line"><span style="color:#22863A;">jobs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#22863A;">test</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">timeout-minutes</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">60</span><span style="color:#24292E;">   </span><span style="color:#6A737D;"># The maximum amount of time that this workflow is allowed to run before it is considered to have timed out.</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">runs-on</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ubuntu-latest</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Specifies the operating system and version to use for the workflow&#39;s virtual environment.</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">steps</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">uses</span><span style="color:#24292E;">: </span><span style="color:#032F62;">actions/checkout@v3</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Checks out the code from the repository into the workflow&#39;s virtual environment.</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">uses</span><span style="color:#24292E;">: </span><span style="color:#032F62;">actions/setup-node@v3</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Sets up the Node.js environment for the workflow.</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">with</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">node-version</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Specifies the version of Node.js to use.</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Install dependencies</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Installs the dependencies required by the application.</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">run</span><span style="color:#24292E;">: </span><span style="color:#032F62;">npm ci</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Install Playwright Browsers</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Installs the Playwright browser dependencies.</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">run</span><span style="color:#24292E;">: </span><span style="color:#032F62;">npx playwright install --with-deps</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Run Playwright tests</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Runs the Playwright tests.</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">run</span><span style="color:#24292E;">: </span><span style="color:#032F62;">npx playwright test</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">uses</span><span style="color:#24292E;">: </span><span style="color:#032F62;">actions/upload-artifact@v3</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Uploads the test report as an artifact.</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">if</span><span style="color:#24292E;">: </span><span style="color:#032F62;">always()</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">with</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">playwright-report</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Specifies the name of the artifact.</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">playwright-report/</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Specifies the path to the directory containing the test report.</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">retention-days</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Specifies how long the artifact should be retained before being automatically deleted.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>Whew. That seems like a lot and it kinda is. This is nearly step by step, what we have been learning this entire time right? In the very beginning of this course, we had to set up Node, we needed to install playwright with the browsers, we needed to run our tests with <code>npm playwright tests</code> and we could then save our HTML doc if needed. Everything we needed to do in the beginning of this course, sans creating the tests themselves, is included within this pipeline. Super cool stuff! One thing we can change however, since we are running these pet-store tests, is the Run Playwright tests step.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-anTec" id="tab-EZRKa_C" checked="checked"><label for="tab-EZRKa_C">new yml</label><input type="radio" name="group-anTec" id="tab-RwhUIhY"><label for="tab-RwhUIhY">old yml</label></div><div class="blocks"><div class="language-yaml vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">- </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Run Playwright tests</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Runs the Playwright tests.</span></span>
<span class="line"><span style="color:#85E89D;">run</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">npx playwright test --workers=1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">- </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Run Playwright tests</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Runs the Playwright tests.</span></span>
<span class="line"><span style="color:#22863A;">run</span><span style="color:#24292E;">: </span><span style="color:#032F62;">npx playwright test --workers=1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">- </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Run Playwright tests</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Runs the Playwright tests.</span></span>
<span class="line"><span style="color:#85E89D;">run</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">npx playwright test</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">- </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Run Playwright tests</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># Runs the Playwright tests.</span></span>
<span class="line"><span style="color:#22863A;">run</span><span style="color:#24292E;">: </span><span style="color:#032F62;">npx playwright test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div><p>This will change it to where it will only run one worker at a time in our pipeline. If you haven&#39;t already, lets go ahead and push this out to the github repo, to see the pipeline in action. ALso, it would be good to note that you should enable the HTML reporter to see the report in github actions as well.</p><h2 id="checking-our-run-in-github" tabindex="-1">Checking our run in Github <a class="header-anchor" href="#checking-our-run-in-github" aria-label="Permalink to &quot;Checking our run in Github&quot;">​</a></h2><p>To see our workflow in action lets head on back to github. and click on the action tab. From here we should see our commit message under the workflow run, with our workflow. <img src="`+o+'" alt=""></p><p>from here lets click on the workflow. From here we can see that our workflow was triggered from the <code>on:push</code> portion of our yml file. If your test is completed, you will also fine the <code>playwright-report artifact</code> here. If its not completed you can click the workflow and watch it working! <img src="'+p+'" alt=""></p><p>We can also see that the bulk of the time is coming from the <code>install playwright browsers</code> portion</p><p>Ok, I feel like this is getting a little long and this might be a good stopping point.</p>',20),c=[r];function i(y,E,h,u,d,m){return n(),a("div",null,c)}const g=s(t,[["render",i]]);export{w as __pageData,g as default};
